### Deep Dive into the world of k8s by Helm 🚀

First we will see some pictures in the sequel.

![](.\pics\0.png)



![](.\pics\1.png)



![](.\pics\3.png)



### How to install Helm 🤔

To install the Helm go to this url

▶ https://github.com/helm/helm/releases

and download the appropriate version for your OS. Them put the directory into your system path. 

### Time to see some Commands 🧐

```bash
$ helm create firstchart

🛑 Iranian guys should change the image name. For example change the "nginx" to "docker.arvancloud.ir/nginx". Otherwise you will not see anything. 

$ helm install firstchartrelease ./firstchart

$ helm list -a

$ kubectl get deployments

$ kubectl get pods

$ kubectl get services

🛑 change the "replicaCount" property in the "values.yaml" file and then run the following command to see what will happen.

$ helm upgrade firstchartrelease ./firstchart

$ helm rollback firstchartrelease 1

🛑 Now if you get "helm list -a" you will see the third revision 🧐.

$ helm lint firstchart

🛑 The above command will find any error or misconfiguration 

$ helm unistall 
or
$ helm delete 
```

### Create your custom charts 💪

In this part, we will use of the `absenteeism` docker image to see how we can implement our personal docker images.

```bash
$ helm create customchart

🛑 In the "repository" property of "values.yaml" file write fozouni/absenteeism:first_try and for the "service" part write as follows

---
service:
  type: NodePort
  port: 8501
---

🛑 In the "Chart.yaml" file comment the last line i.e., 
appVersion: "1.16.0". Since we do not need any versions here.

🛑 In the "template/deployments.yaml" file comment these lines

---
  livenessProbe:
     httpGet:
      path: /
      port: http
      readinessProbe:
      httpGet:
       path: /
       port: http
---

and from the " imagePullPolicy" property remove the name as you will see in the video.

$ helm install customchartrelease ./customchart

$ kubectl get services

$ minikube ip 

🛑 Mix the last two commands to see your docker application on the Chrome browser
```

🚀 **Congratulations!**

### Helming easier with Helmfile 😉



![](.\pics\4.png)



### Install Helmfile 🤔

To install the binaries of helmfile go to the following URL

▶ https://github.com/helmfile/helmfile/releases

### See the applications of helmfile 😎

```bash
Create a file "helmfile.yaml" and put in it the following lines:

---
releases:

  - name: helloworldrelease
    chart: helloworld
    installed: true

Go to the directory which has the chart (helloworld in this case) and helmfile.yaml. Then easily run the following command

$ helmfile sync

This command will create for us the from the chart "helloworld".

🛑 If we set the "installed" property to "false", and run one more time the above command, we will indeed uninstall the previous release and this is amazing 😉.

🛑 We can specify a github repo for the "helmfile.yaml" to pull a project which has been developed by our colleagus directly. But it is not our main concern here. You can go for it later. 

🛑 We can write helmfile to simultaneously deploying more than one helmchart for us:

---
releases:

  - name: helloworldrelease1
    chart: helloworld1
    installed: true
   
  - name: helloworldrelease2
    chart: helloworld2
    installed: true 
    
 Now if we just run 
 
 $ helmfile sync
 
 we will indeed install two helmcharts. Perfect.
```



### Last but not least, Helm Repo 🤨

We will cover this concept "helm repo" in the next session. 



**KEEP HELMING and ENJOY 😎**